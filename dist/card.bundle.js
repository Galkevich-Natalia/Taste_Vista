(()=>{"use strict";var t={d:(e,n)=>{for(var c in n)t.o(n,c)&&!t.o(e,c)&&Object.defineProperty(e,c,{enumerable:!0,get:n[c]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};async function e(t){return fetch("https://65bcf37fb51f9b29e932a09e.mockapi.io/API/Menu").then((t=>t.json())).then((e=>{let n;for(let c in e[0])e[0][c].forEach((e=>{e.id===t&&(n={...e})}));return n})).catch((t=>{throw t}))}function n(t){if(!t.target.classList.contains("card__btn")){const n=+t.currentTarget.id,r=document.querySelector(".overlay"),o=document.querySelector("body");try{e(n).then((t=>{a(t,"modal"),r.style.display="block",r.addEventListener("click",c),o.classList.add("hideScroll")}))}catch(t){throw t}}}function c(){const t=document.querySelector(".card_modal"),e=document.querySelector(".overlay"),n=document.querySelector("body");t.remove(),e.style.display="none",n.classList.remove("hideScroll")}t.d({},{S:()=>m});const r=document.querySelector(".cards__container");function a(t,e){r.append(function(t,e){const r=document.createElement("div"),a="ordinary"===e?"card":"card_modal";return r.classList.add(a),r.id=t.id,r.append(function(t,e){const n=document.createElement("div");return n.classList.add("card__container"),n.append(function(t,e){const n=document.createElement("div"),r="ordinary"===e?"card__wrapper":"card__wrapper_modal";return n.classList.add(r),n.append(function(t,e){const n=document.createElement("div"),c="ordinary"===e?"card__image":"card__image_modal";return n.classList.add(c),n.append(function(t){const e=document.createElement("img");return e.classList.add("img"),e.src=t.image,e.alt=t.name,e}(t)),n}(t,e),function(t,e){const n=document.createElement("div");return"ordinary"===e?(n.classList.add("card__content"),n.append(o(t,e)),t.ingredients&&n.append(function(t){const e=document.createElement("div");e.classList.add("card__ingredients");const n=document.createElement("span");return n.textContent=t.ingredients.join(", ")+".",e.append(n),e}(t)),n.append(d(t))):"modal"===e&&(n.classList.add("card__content_modal"),n.append(function(){const t=document.createElement("div");return t.classList.add("card__containerCross"),t.append(function(){const t=document.createElement("button");return t.classList.add("cross","cross_menu-card-modal"),t.addEventListener("click",c),t}()),t}(),o(t,e)),t.description&&n.append(function(t){const e=document.createElement("div");e.classList.add("card__description");const n=document.createElement("span");return n.textContent=t.description,e.append(n),e}(t)),n.append(d(t))),n}(t,e)),n}(t,e)),n}(t,e)),"ordinary"===e&&r.addEventListener("click",n),r.addEventListener("click",m),r}(t,e))}function o(t,e){const n=document.createElement("div");return n.classList.add("card__name"),n.append(function(t,e){const n=document.createElement("span"),c="ordinary"===e?"card__text":"card__text_modal";return n.classList.add(c),n.textContent=t.name+" - ",n.append(function(t){const e=document.createElement("span");return e.classList.add("card__sizeValue"),e.textContent=t.size,e}(t)),n}(t,e)),n}function d(t){const e=document.createElement("div");return e.classList.add("card__footer"),e.append(function(t){const e=document.createElement("div");return e.classList.add("card__cost"),e.append(function(t){const e=document.createElement("p");return e.classList.add("card__cost-price"),e.textContent=(n=t.price,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n)),e;var n}(t)),e}(t),function(){const t=document.createElement("div");return t.classList.add("card__container-btn"),t.append(function(){const t=document.createElement("button");return t.classList.add("card__btn"),t.textContent="+",t}()),t}()),e}function s(t){localStorage.setItem("Orders",JSON.stringify(t))}function i(){const t=localStorage.getItem("Orders");return JSON.parse(t)}async function u(t){try{const e=await async function(){return fetch("https://65bcf37fb51f9b29e932a09e.mockapi.io/API/Menu").then((t=>t.json())).then((t=>t)).catch((t=>{throw t}))}(),n=t.toLowerCase(),c=e[0][n];document.querySelectorAll(".card").forEach((t=>t.remove())),c.forEach((t=>a(t,"ordinary")))}catch(t){throw console.error("error",t),t}}function l(t){const e=t.target,n=t.target.textContent;document.querySelectorAll(".menu__item-button").forEach((t=>t.classList.remove("menu__item-button_active"))),e.classList.add("menu__item-button_active"),u(n)}function m(t){if(t.target.classList.contains("card__btn")){const n=+t.currentTarget.id;try{e(n).then((t=>{if(null===i())t.count=1,s([t]);else{const e=i();void 0===e.find((e=>e.id===t.id))?(t.count=1,e.push(t)):e.forEach((e=>{e.id===t.id&&(e.count+=1)})),s(e)}}))}catch(t){throw t}}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".menu__item-button")[0].classList.add("menu__item-button_active"),u("snacks"),function(){const t=document.querySelectorAll(".menu__item-button");Array.from(t).forEach((t=>t.addEventListener("click",l)))}()}))})();